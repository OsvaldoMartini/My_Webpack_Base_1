@model System.Collections.ObjectModel.Collection<IHS.Apps.CMP.Models.ViewModels.Bookmark>

@if (Model.Count == 0)
{
    <div class="well text-center large">@this.LocalResources("NoneFound")</div>
}
else
{
    <table id="bookmarkTable" class="table">
        <tbody>
            @{
                string currentCategory = string.Empty;
                int rowId = 0;
            }
            @foreach (IHS.Apps.CMP.Models.ViewModels.Bookmark bookmark in Model)
            {
                if (string.IsNullOrEmpty(currentCategory) || !currentCategory.Equals(bookmark.CategoryKey))
                {
                    currentCategory = bookmark.CategoryKey;
                    <tr class="bookmarkCatRow light-grey-bg">
                        <td colspan="6">
                            <h4 class="u-margin-Tn u-margin-Bn">@bookmark.CategoryName</h4>
                        </td>
                    </tr>
                }

                <tr id="@rowId" class="bookmarkRow text-middle">
                    <td class="u-padding-Vm u-padding-Lm large">
                        <i class="icon-bookmark large"></i>
                        <a href="view.axd?from=Bookmarks&catKey=@bookmark.CategoryKey&searchId=@bookmark.Id" target="_new">@bookmark.Title</a>
                        @if (!string.IsNullOrEmpty(bookmark.Description))
                        {
                            @:- @bookmark.Description
                    }
                    </td>

                    <td class="text-center" style="display:none;">
                        <label class="toggleSwitch">
                            <input type="checkbox" @(bookmark.IsEmailAlert ? "checked=checked" : "") class="alertToggle" data-content="@bookmark.Id" />
                            <span>
                                <span></span>
                                <span></span>
                                <a></a>
                            </span>
                        </label>
                    </td>
                    <td class="text-right width-20 u-padding-Rm">
                        @if (bookmark.CanShare)
                        {
                            <button class="icon-share xlarge hand tipsyMe" title="@this.LocalResources("Share")" data-toggle="modal" data-target="#shareModal" onclick="SetupShareDialog('@currentCategory', '@bookmark.ProviderKey', '@bookmark.Id', 'Normal')"></button>
                        }
                        @if (bookmark.CanDelete)
                        {
                            <button class="icon-trash xlarge hand tipsyMe" title="@this.LocalResources("Delete")" onclick="DeleteBookmark(@rowId, '@bookmark.Id');"></button>
                        }
                        
                        <dl class="dl-horizontal text-muted u-margin-Ts u-margin-Bn">
                            <dt>@this.LocalResources("CreatedDate")</dt>
                            <dd>@bookmark.DateCreated</dd>
                        </dl>
                    </td>
                </tr>
                        rowId++;
            }
        </tbody>
    </table>
}