@using IHS.Apps.CMP.Models.ViewModels
@model ResultsDataModel<IHS.Core.Catalog.Model.IItem>

<table class="table hover checkboxes results-story">
    <caption class="sr-only">Search results for the selected filters</caption>

    @foreach (var record in Model.ResultItems)
    {
        <tr class="result-item" data-row-id="@record.Data.ID" data-bind="css : { warning : selectedRecords.indexOf('@record.Data.ID') >
                -1 }">

            <td class="checkboxcell row_selector">
                <input id="chkRow_@record.Data.ID" type="checkbox" data-bind="checked : selectedRecords, value : '@record.Data.ID'">
                <label for="chkRow_@record.Data.ID"></label>
            </td>

            <td class="story-contents">

                @{

                    var title = record.Cells.SingleOrDefault(p => p.Key == "HEADLINE");
                    var teaser = record.Cells.SingleOrDefault(p => p.Key == "DESCRIPTION");
                    var country = record.Cells.SingleOrDefault(p => p.Key == "EVENT_COUNTRY");
                    var postDate = record.Cells.SingleOrDefault(p => p.Key == "START_DATE");
                    var eventType = record.Cells.SingleOrDefault(p => p.Key == "EVENT_TYPE");
                    var significance = record.Cells.SingleOrDefault(p => p.Key == "SIGNIFICANCE");
                }

                @if (title != null)
                {
                    <p class="@title.CssClass">
                        @Html.Partial(title.PartialViewName, title)
                    </p>
                }

                @if (postDate != null)
                {
                    <p class="@teaser.CssClass">
                        @Html.Partial(teaser.PartialViewName, teaser)
                    </p>
                }


                @if (postDate != null)
                {

                    <p class="@country.CssClass">
                        <strong>Country:</strong>
                        @Html.Partial(country.PartialViewName, country)
                    </p>
                }

                @if (eventType != null)
                {
                    <p class="@eventType.CssClass">
                        <strong>Event Type:</strong>
                        @Html.Partial(country.PartialViewName, eventType)
                    </p>
                }

                @if (significance != null)
                {
                    <p class="@significance.CssClass">
                        <strong>Significance:</strong>
                        @Html.Partial(country.PartialViewName, significance)
                    </p>
                }

                @if (postDate != null)
                {

                    <p class="@postDate.CssClass">
                        <strong>Publication Date:</strong>
                        @Html.Partial(postDate.PartialViewName, postDate)
                    </p>

                }

            </td>
        </tr>
    }
</table>