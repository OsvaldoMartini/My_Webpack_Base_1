@model IHS.Apps.CMP.Web.ICmpRequestContext

@{
    Layout = "~/Views/Shared/_LayoutFullScreen.cshtml";
}

@section browser_title
{
    @if (Model.ApplicationConfig.name.Equals("JANES", StringComparison.OrdinalIgnoreCase))
    {
        this.LocalResources("MySubscriptionsTitle");
    }
    else
    {
        this.LocalResources("MyProfileTitle");
    }
}

@section page_title
{
    <div class="page-header">
        @if (Model.ApplicationConfig.name.Equals("JANES", StringComparison.OrdinalIgnoreCase))
        {
            <h1>@this.LocalResources("MySubscriptionsTitle")</h1>
        }
        else
        {
            <h1>@this.LocalResources("MyProfileTitle")</h1>
        }
    </div>
}

@section additional_scripts
{
    @if (!this.ViewBag.HideOptions)
    {
        <script type="text/javascript">
            var currentApp = "@Model.ApplicationConfig.name";
            var currentCatId = "@Model.CurrentCategory.ID";
        </script>
        @Scripts.Render("~/bundles/myprofile")
    }
}

<div class="grid-1 grid-sm-1-2 grid-lg-1-3">
    @if ((User.CompanyInfo != null) && !string.IsNullOrEmpty(User.CompanyInfo.CompanyLogo))
    {
        string logo = @"~" + User.CompanyInfo.CompanyLogo;

        if (IHS.Apps.CMP.Utilities.FileUtils.FileExists(logo, null))
        {
            <p class="img"><img alt="@User.CompanyName" src="@User.CompanyInfo.CompanyLogo" class="img-responsive"></p>
        }
        else
        {
            Log.Warn("Missing Company Logo : " + User.CompanyInfo.CompanyLogo);
        }
    }

    <div class="grid">
        <div class="grid-1-3 text-right">
            <p><h3><span class="corp-blue">@this.LocalResources("Name")</span></h3></p>
            <p><h3><span class="corp-blue">@this.LocalResources("EmailAddress")</span></h3></p>
            <p><h3><span class="corp-blue">@this.LocalResources("Company")</span></h3></p>
        </div>
        <div class="grid-2-3 u-border-left">
            <p><h3>@User.DisplayName</h3></p>
            <p><h3>@User.RegisteredEmailAddress</h3></p>
            <p><h3>@User.CompanyName</h3></p>
        </div>

        @if (User.CompanyContact != null)
        {
            <div class="grid-1-3 text-right"><p><h3><span class="corp-blue">@this.LocalResources("ContactName")</span></h3></p></div>
            <div class="grid-2-3 u-border-left"><p><h3>@User.CompanyContact.ContactName</h3></p></div>
            <div class="grid-1-3 text-right"><p><h3><span class="corp-blue">@this.LocalResources("ContactDetails")</span></h3></p></div>
            <div class="grid-2-3 u-border-left">
                <p>
                    <address>@Html.Raw(User.CompanyContact.GetContactAddress("<br />"))</address>

                    @if (!string.IsNullOrEmpty(User.CompanyContact.PhoneNumber))
                    {
                        <abbr title="Telephone">Tel:</abbr>@User.CompanyContact.PhoneNumber
                        <br />
                    }

                    @if (!string.IsNullOrEmpty(User.CompanyContact.Email))
                    {
                        <a href="mailto:@User.CompanyContact.Email">@User.CompanyContact.Email</a>
                    }
                </p>
            </div>
        }
    </div>
</div>
@if (!this.ViewBag.HideOptions)
{
    <div class="grid-1-3">
        @if (Model.CurrentCategoryControlConfig != null && (Model.CurrentCategoryControlConfig.settings.enable_text_highlighting != IHS.Apps.CMP.Models.Configuration.text_highlight_options.None
        || (Model.CurrentCategoryControlConfig.settings.enable_slimline_righthand_panelsSpecified && Model.CurrentCategoryControlConfig.settings.enable_slimline_righthand_panels)))
        {
            <div class="card">
                <h2>@this.LocalResources("GeneralOptions")</h2>

                @if (Model.CurrentCategoryControlConfig.settings.enable_text_highlighting != IHS.Apps.CMP.Models.Configuration.text_highlight_options.None)
                {
                    <h4>
                        <label class="toggleSwitch">
                            <input id="toggleTextHighlighting" type="checkbox" checked="@(!UserProfile.DisableTextHighlightingOfSearchedRefinements)" />
                            <span>
                                <span></span>
                                <span></span>
                                <a></a>
                            </span>@this.LocalResources("Enabletexthighlighting")
                        </label>
                    </h4>
                }

                @if (Model.CurrentCategoryControlConfig.settings.enable_slimline_righthand_panelsSpecified && Model.CurrentCategoryControlConfig.settings.enable_slimline_righthand_panels)
                {
                    <h4>
                        <label class="toggleSwitch">
                            <input id="toggleSlimLinePanels" type="checkbox" checked="@(!UserProfile.DisableOnDemandRightHandMenus)" />
                            <span>
                                <span></span>
                                <span></span>
                                <a></a>
                            </span>@this.LocalResources("Enableslimlinerighthandpanels")
                        </label>
                    </h4>
                }

            </div>
        }
        @if (Model.CurrentCategoryControlConfig.link_panel != null && Model.CurrentCategoryControlConfig.link_panel.Length > 0)
        {
            <div class="card">
                <h2>@this.LocalResources("PanelsToDisplay")</h2>

                @for (int i = 0; i < Model.CurrentCategoryControlConfig.link_panel.Length; i++)
                {
                    IHS.Apps.CMP.Models.Configuration.categoryLink_panel aPanel = Model.CurrentCategoryControlConfig.link_panel[i];
                    <h4>
                        <label class="toggleSwitch">
                            <input id="@aPanel.link_type.ToString()" class="panelSelection" type="checkbox" checked="@UserProfile.GetPanelVisibility(Model.ApplicationConfig.name, Model.CurrentCategory.ID, aPanel.link_type.ToString())" />
                            <span>
                                <span></span>
                                <span></span>
                                <a></a>
                            </span>@this.LocalResources(aPanel.title_resource_key)
                        </label>
                    </h4>
                }
            </div>
        }
    </div>
}
<div class="@(!this.ViewBag.HideOptions ? "grid-1-3" : "grid-1 grid-md-1-2 grid-lg-2-3")">
    @Html.Action("Populate", "MySubscriptions")
</div>