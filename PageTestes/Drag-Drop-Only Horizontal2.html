<!DOCTYPE html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, 
        initial-scale=1.0, 
        user-scalable=no"
    />
    <title>Drag/Drop/Bounce</title>
    <style>
      #container {
        width: 100%;
        height: 400px;
        background-color: #333;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        border-radius: 7px;
        touch-action: none;
      }
      #item {
        width: 100px;
        height: 100px;
        background-color: rgb(245, 230, 99);
        border: 3px solid rgba(136, 136, 136, 0.5);
        border-radius: 50%;
        touch-action: none;
        user-select: none;
      }
      #item:active {
        background-color: rgba(168, 218, 220, 1);
      }
      #item:hover {
        cursor: pointer;
        border-width: 20px;
      }

/*Elastic box centers demo*/
/* body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        } */
        /*The outermost layer is used to hide the overflow part of the. BGC in the middle 
        Size can be adjusted freely according to content area and border size*/
        .wrap {
            width: 30px;
            height: 30px;
            overflow: hidden;
            position: relative;
            border-radius: 20px;
            /*Elastic box to center content area*/
            display: flex;
            align-items: center;
            justify-content: center; 
        }
        /*In the end, the actual content of the dynamic gradient frame is larger than that of. Wrap, but the overflow part is hidden 
        And the middle part is covered by. Content because of hierarchy 
        Finally, only the gap between. Wrap and. Content shows the rotated gradient background*/
        .bgc {
            width: 50px;
            height: 50px;
            background: linear-gradient(#fff,#448de0);
            animation: bgc 1.5s infinite linear;
            border-radius: 50%;
            position: absolute; 
            z-index: -1;
        }
        /*Content area resizes according to its own situation*/
        .content {
            width: 25px;
            height: 25px;
            background-color: #fff;
            border-radius: 20px;
        }
 /*Gradient background rotation animation*/
        /* @keyframes bgc {
            0% {
                transform: rotateZ(0);
            }

            100% {
                transform: rotateZ(360deg);
            }
        } */


    </style>
  </head>

  <body>
    <div id="outerContainer">
      <div id="container">
        <div id="item"></div>
      </div>
    </div>

    <! -- the outermost layer only limits the size of the gradient area -- >
    <div class="wrap">
        <! -- gradient display area -- >
        <div id="torotate" class="bgc"></div>
        <! -- content -- >
        <div class="content"></div>
    </div>

    <script>
      var dragItem = document.querySelector('#item')
      var container = document.querySelector('#container')

      var bgc = document.getElementById("torotate");

      var active = false
      var currentX
      var currentY
      var initialX
      var initialY
      var xOffset = 0
      var yOffset = 0

      container.addEventListener('touchstart', dragStart, false)
      container.addEventListener('touchend', dragEnd, false)
      container.addEventListener('touchmove', drag, false)

      container.addEventListener('mousedown', dragStart, false)
      container.addEventListener('mouseup', dragEnd, false)
      container.addEventListener('mousemove', drag, false)

      function dragStart(e) {
        if (e.type === 'touchstart') {
          initialX = e.touches[0].clientX - xOffset
          initialY = e.touches[0].clientY // - yOffset
        } else {
          initialX = e.clientX - xOffset
          initialY = e.clientY - yOffset
        }

        if (e.target === dragItem) {
          active = true
        }
      }

      function dragEnd(e) {
        initialX = currentX
        initialY = currentY

        active = false
      }

      function drag(e) {
        if (active) {
          e.preventDefault()

          if (e.type === 'touchmove') {
            currentX = e.touches[0].clientX - initialX
            currentY = 0 //e.touches[0].clientY - initialY
          } else {
            currentX = e.clientX - initialX
            currentY = 0 //e.clientY - initialY
          }

          xOffset = currentX
          yOffset = currentY
          console.log(currentY)
          setTranslate(currentX, currentY, dragItem)
        }
      }

      function setTranslate(xPos, yPos, el) {
        el.style.transform = 'translate3d(' + xPos + 'px, ' + yPos + 'px, 0)'
        bgc.style.transform= 'rotateZ('+xPos+'deg)'
      }
    </script>
  </body>
</html>
